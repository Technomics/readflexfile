<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The FlexFile Framework: Preparing for Powerful Analysis in R (ICEAA Paper) • readflexfile</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The FlexFile Framework: Preparing for Powerful Analysis in R (ICEAA Paper)">
<meta property="og:description" content="readflexfile">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">readflexfile</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/csdrtool-vignette.html">The FlexFile Framework: Preparing for Powerful Analysis in R (ICEAA Paper)</a>
    </li>
    <li>
      <a href="../articles/importing-flexfile.html">Using csdrtools to import one or multiple FlexFiles</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="csdrtool-vignette_files/kePrint-0.0.1/kePrint.js"></script><script src="csdrtool-vignette_files/htmlwidgets-1.5.1/htmlwidgets.js"></script><script src="csdrtool-vignette_files/plotly-binding-4.9.2.1/plotly.js"></script><script src="csdrtool-vignette_files/typedarray-0.1/typedarray.min.js"></script><script src="csdrtool-vignette_files/jquery-1.11.3/jquery.min.js"></script><link href="csdrtool-vignette_files/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet">
<script src="csdrtool-vignette_files/crosstalk-1.1.0.1/js/crosstalk.min.js"></script><link href="csdrtool-vignette_files/plotly-htmlwidgets-css-1.52.2/plotly-htmlwidgets.css" rel="stylesheet">
<script src="csdrtool-vignette_files/plotly-main-1.52.2/plotly-latest.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The FlexFile Framework: Preparing for Powerful Analysis in R (ICEAA Paper)</h1>
            
      
      
      <div class="hidden name"><code>csdrtool-vignette.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">readflexfile</span>)</pre></body></html></div>
<div id="abstract" class="section level2">
<h2 class="hasAnchor">
<a href="#abstract" class="anchor"></a>Abstract</h2>
<p>The Cost and Hour Report (“FlexFile”) is a new Contractor Cost Data Reporting (CCDR) format that promises to change the world of Department of Defense (DoD) cost analysis by delivering significantly more granular cost and hour data than its predecessor, the DD 1921 series of reports. The volume of the FlexFile requires a more thoughtful approach to importing, wrangling, transforming, and ultimately communicating data than Microsoft Excel (Excel) may offer. This paper introduces the R package <strong><code>csdrtools</code></strong> that helps the analyst exploit the FlexFile to its fullest extent.</p>
</div>
<div id="acknowledgements" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgements" class="anchor"></a>Acknowledgements</h2>
<p>The authors would like to acknowledge the following individuals:</p>
<p><strong>Adam James</strong> (Technomics, Inc.) provided technical guidance in the development of <strong><code>csdrtools</code></strong>.</p>
<p><strong>Marc Stephenson</strong> (Technomics, Inc.) is the contractor lead for the OSD CAPE FlexFile initiative, and served as a valuable resource for many FlexFile-specific matters.</p>
<p><strong>Dan Germony</strong> (Cost &amp; Systems Analysis Office, USA TACOM LCMC) has championed the use of R in the cost community, and has developed tools for working with DD 1921 reports.</p>
</div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The cost estimating and analysis (Cost) profession and the value of its advice to decision makers is largely dependent on the cost, technical, and programmatic data that underlie analyses. The most common tools that the profession uses to organize and manipulate data are Excel and Excel add-ins. The appeal of Excel is obvious. Every government and industry workstation is Excel-equipped, it is easy to use and, with the right amount of practice, it is possible to become a self-taught power-user capable of exploiting Excel’s full potential. Unfortunately, the downside of Excel is becoming increasingly obvious to even the most advanced users. Some of the core problems are summarized below.</p>
<ol style="list-style-type: decimal">
<li><p>Lack of <strong>consistency</strong>. Excel offers extreme flexibility. This necessarily means that the workbook is only as organized as the creator’s thoughts. The outcome can range from a very well organized workflow to an incomprehensible one.</p></li>
<li><p>Lack of <strong>object language</strong>. Excel has a weak (at best) object language. This means that workbooks are customized to every problem. Reusing analysis becomes very difficult, if not impossible.</p></li>
<li><p>Lack of <strong>statistical features</strong>. Excel is not a statistical platform. Model (e.g., CER) development is limited to basic factors and linear regression (with even the latter not performed to satisfaction without custom add-ins).</p></li>
<li><p>Lack of <strong>scalability</strong>. Excel struggles with large, diverse data. Complex data sets of the present and the future (e.g., FlexFile, O&amp;S datasets) will simply not fit in Excel.</p></li>
<li><p>Lack of <strong>graphical features</strong>. Excel graphics are custom made for each application. It is hard (but not impossible) to reuse a stock graphic for alternative datasets. In addition, graphics are static and lack visual appeal.</p></li>
<li><p><strong>Fixed state</strong>. Excel models exist in a singular state. For example, a single cell can only have one value. A user cannot allow vector inputs without the help of an outside tool (e.g., Crystal Ball and other tools to support a Monte Carlo use case).</p></li>
</ol>
<p>Some of these issues can be mitigated by extensive training in data analytics, Excel, and workflow development. Others are impossible for even the expert user. Cost must adopt new tools and techniques to turn large, complex datasets into actionable information for analysts and decision makers.</p>
<p>We present an alternative approach to handling cost data, specifically CCDRs. This paper describes that alternative – the <strong><code>csdrtools</code></strong> package within R, an existing open source data analytics framework.</p>
<p>As the first adopters of the FlexFile, we rely on tools such as R. Soon, the cost community will, too. We strongly believe that the community will not only benefit from, but in fact rely upon packages such as <strong><code>csdrtools</code></strong> as it transitions into an age of bigger and more complex datasets.</p>
</div>
<div id="the-flexfile-and-quantity-data-report" class="section level2">
<h2 class="hasAnchor">
<a href="#the-flexfile-and-quantity-data-report" class="anchor"></a>The FlexFile and Quantity Data Report</h2>
<p>CCDRs, a subset of Cost and Software Data Reports (CSDRs), are the standard for actual cost and hour data collection for Major Defense Acquisition Programs (MDAPs). Over the past three decades, cost reporting formats in the defense sector have remained largely unchanged. However, in May, 2019, the Defense community replaced the DD 1921 series with the FlexFile and Quantity Data Report for all new contracts with CSDR reporting requirements.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<ul>
<li>Dollars and hours tagged to an Account. This is intended to be the level (e.g., work package, control account, charge code) at which the contract subject to the cost reporting requirement incurs costs.</li>
<li>A time-phased reporting period</li>
<li>Reporting by CLIN</li>
<li>The reporting company’s Functional Categories and Functional Overhead Categories, which align with their internal pricing categories.</li>
</ul>
</div>
<div id="what-r-we-talking-about" class="section level2">
<h2 class="hasAnchor">
<a href="#what-r-we-talking-about" class="anchor"></a>What R We Talking About?</h2>
<p>R was developed as a purpose-built statistical analysis tool. As a result, its foundational, base capabilities are rooted in data manipulation and statistical methods. However, the true power of R is its extensive library of packages curated and maintained in the Comprehensive R Archive Network (CRAN).<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></p>
<p>R was originally used solely by statisticians to solve fairly specific problems. In the mid-2000s, personal computing power exploded, signaling the arrival of the Data Age. This led to the rapid adoption and the mainstream use of R by a new user base – the “data scientist”.</p>
<p>In the early years, packages evolved quickly and users frequently changed how they did things. In the early 2010s, a certain user base started to evolve and superstar developers began to consolidate and define the standard packages and workflows for an efficient, effective, and scalable data science work stream. Almost more importantly, they stabilized the “wild west” culture and introduced a standard approach to a macro set of problems.</p>
<p>Today, a large amount of work is being led and funded by the private company RStudio.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> Their namesake product is the standard integrated design environment (IDE) for R users. They also have designed, developed, and are maintaining a robust collection of packages known as the “tidyverse”.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> In some circles, the tidyverse has become so popular that it is almost synonymous to R itself. Many data science courses teach solely from this framework. The tidyverse is the creation of RStudio’s Chief Scientist Hadley Wickham and his team.<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> It is, in Wickham’s words, “a collection of R packages that share a high-level design philosophy and low-level grammar and data structures.”<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<p>The tidyverse has changed the way many R users operate. The packages are both lightning quick and user friendly. They include the standards for data graphics (ggplot2, RShiny), data wrangling (dplyr, tidyr, tibble), custom package development (devtools, testthis), and workflow development and documentation (rmarkdown and RStudio). Additionally, they are developing and maturing frameworks for topics such as machine learning (tidymodels).</p>
<p>The general tidyverse workflow is demonstrated below<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>:</p>
<div class="figure">
<img src="../../../../../../../../O:/Conferences/ICEAA/2020-ICEAA-San-Antonio-CANX/Papers-Technomics/csdrtools%20Paper/Images/data-science.png" alt="tidyverse/data science workflow"><p class="caption">tidyverse/data science workflow</p>
</div>
</div>
<div id="csdrtools" class="section level2">
<h2 class="hasAnchor">
<a href="#csdrtools" class="anchor"></a>csdrtools</h2>
<p>The tidyverse provides a general framework for efficiently working with data. However, there are still repetitive and tedious tasks that must be performed when working with a custom data format such as the FlexFile.</p>
<p>To achieve this, we’ve created an R package, <strong><code>csdrtools</code></strong>, which handles the tasks of importing, tidying, transforming, and visualizing the FlexFile. <strong><code>csdrtools</code></strong> contain the following core functions:</p>
<ul>
<li>The <code><a href="../reference/read_ff.html">read_ff()</a></code> and <code><a href="https://rdrr.io/pkg/costmisc/man/read_folder.html">read_folder()</a></code> functions <strong>import</strong> the FlexFile.</li>
<li>The <code><a href="../reference/stack_ff.html">stack_ff()</a></code>, <code><a href="https://rdrr.io/pkg/costmisc/man/add_id_col.html">add_id_col()</a></code>, and <code><a href="https://rdrr.io/pkg/costmisc/man/add_id_col.html">listindex_to_col()</a></code> functions help <strong>tidy</strong> the FlexFile.</li>
<li>The <code><a href="../reference/flatten_lists.html">flatten_ff()</a></code> function <strong>transforms</strong> the FlexFile by joining the up to 20 tables of cost, hour, and metadata information into one. The <code>table_*()</code> functions produce summary tables.</li>
<li>The <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff()</a></code> and <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">sankey_ff()</a></code> functions <strong>visualize</strong> the FlexFile with pre-built graphics.</li>
</ul>
<p>The <strong><code>csdrtools</code></strong> package is built under the tidyverse philosophy. Functions are intended to be strung together with the pipe (<code><a href="../reference/pipe.html">%&gt;%</a></code>) operator. This represents a powerful benefit of the tidyverse. Pipes allow the analyst to clearly express a sequence of multiple operations, in which the output of the prior operation is fed into the input of the next operation. The functions within <strong><code>csdrtools</code></strong> support this capability.</p>
<p>The <strong><code>csdrtools</code></strong> package is also designed to interact with other tidyverse packages, such as <code>dplyr</code>. The <code>dplyr</code> package is the tidyverse standard for data manipulation, such as filtering and subsetting data, and transforming variables. This will be discussed in more detail in section 1.6.2: Tidy.</p>
<p>The FlexFile provides significantly more granular data than the DD 1921 reports. There does not exist a tool to interact with the entirety of the FlexFile. This is especially apparent when working with multiple FlexFiles.</p>
<p>The <strong><code>csdrtools</code></strong> package solves this problem. This package was not developed as a “science project”, but as a need-driven solution to eliminate the barrier to entry for using the FlexFile.</p>
<p>The following sections describe each function within <strong><code>csdrtools</code></strong> in more detail. This information is also contained in each function’s help file.<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a></p>
<div id="import" class="section level3">
<h3 class="hasAnchor">
<a href="#import" class="anchor"></a>Import</h3>
<p>The FlexFile Data Exchange Instructions defines the standard format of the FlexFile as a collection of tables.<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a> These tables are stored as JavaScript Object Notation (JSON) files in a compressed archive (.zip).</p>
<p>JSON is intended to be a machine-readable format. Excel is able to open such files, but the process is a bit complex. CADE provides several exports that convert JSON to an Excel flat file. This is helpful because it provides a dataset with which to work. However, JSON remains the rawest format of the data. In order to work with the file directly, you will need to use another tool.</p>
<p>R has a number of functions available to import data, typically prefixed with the word “read” (e.g., <code>read_csv()</code>, <code>read_excel()</code>, <code>read_json()</code>). Sticking with this convention, <strong><code>csdrtools</code></strong> provides <code><a href="../reference/read_ff.html">read_ff()</a></code> and <code><a href="https://rdrr.io/pkg/costmisc/man/read_folder.html">read_folder()</a></code> to read the FlexFile data into R.</p>
<div id="read_ff" class="section level4">
<h4 class="hasAnchor">
<a href="#read_ff" class="anchor"></a><code>read_ff()</code>
</h4>
<p>The <code><a href="../reference/read_ff.html">read_ff()</a></code> function loads a given FlexFile (.zip) into R. The function returns a list of data frames – one for each JSON file.</p>
<div id="usage-and-arguments" class="section level5">
<h5 class="hasAnchor">
<a href="#usage-and-arguments" class="anchor"></a>Usage and Arguments</h5>
<p><code><a href="../reference/read_ff.html">read_ff(file, .clean_names = TRUE)</a></code></p>
<ul>
<li>
<code>file</code>: Path to a FlexFile .zip archive.</li>
<li>
<code>.clean_names</code>: Logical whether to clean the names using <code>clean_names()</code> or not. If <code>TRUE</code>, all column names will be converted to lower snake case (i.e., <code>account_id</code>). This follows the tidyverse style guide. If <code>FALSE</code>, column names are kept in the default upper camel case (i.e., <code>AccountID</code>). This follows the FlexFile data model format.</li>
</ul>
</div>
<div id="example" class="section level5">
<h5 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h5>
<p>Minimal code is required to run this function and store the data as list <code>aircraft_ff</code>:</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># Load the csdrtools package</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">readflexfile</span>)

<span class="co"># Read an example from the package</span>
<span class="no">file</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"Sample File_FF.zip"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"readflexfile"</span>)

<span class="co"># Read in the example FlexFile</span>
<span class="no">aircraft_ff</span> <span class="kw">&lt;-</span> <span class="kw pkg">readflexfile</span><span class="kw ns">::</span><span class="fu"><a href="../reference/read_ff.html">read_ff</a></span>(<span class="kw">file</span> <span class="kw">=</span> <span class="no">file</span>,
                       <span class="kw">.clean_names</span> <span class="kw">=</span> <span class="no">T</span>)
<span class="co">#&gt; Loading required namespace: jsonlite</span></pre></body></html></div>
<p>The function <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> provides an overview of the data frames within this list. Each data frame contains the data of its respective JSON file in the native FlexFile.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">aircraft_ff</span>)
<span class="co">#&gt;  [1] "filetype"                         "reportconfiguration"             </span>
<span class="co">#&gt;  [3] "reportmetadata"                   "ordersorlots"                    </span>
<span class="co">#&gt;  [5] "clins"                            "enditems"                        </span>
<span class="co">#&gt;  [7] "wbs"                              "accounts"                        </span>
<span class="co">#&gt;  [9] "functionalcategories"             "functionaloverheadcategories"    </span>
<span class="co">#&gt; [11] "unitsorsublots"                   "reportingcalendar"               </span>
<span class="co">#&gt; [13] "summarycostdata"                  "actualcosthourdata"              </span>
<span class="co">#&gt; [15] "forecastatcompletioncosthourdata" "summaryremarks"                  </span>
<span class="co">#&gt; [17] "wbselementremarks"                "wbsdictionarydefinitions"        </span>
<span class="co">#&gt; [19] "costhourtagdefinitions"</span></pre></body></html></div>
</div>
</div>
<div id="read_folder" class="section level4">
<h4 class="hasAnchor">
<a href="#read_folder" class="anchor"></a><code>read_folder()</code>
</h4>
<p>Loading multiple FlexFiles into one list enables comparing or aggregating multiple contracts, contractors, programs, and commodities. The function <code><a href="https://rdrr.io/pkg/costmisc/man/read_folder.html">read_folder()</a></code> loads all FlexFiles (.zip) within a folder into R.</p>
<div id="usage-and-arguments-1" class="section level5">
<h5 class="hasAnchor">
<a href="#usage-and-arguments-1" class="anchor"></a>Usage and Arguments</h5>
<p><code><a href="https://rdrr.io/pkg/costmisc/man/read_folder.html">read_folder(folder, read_function, .clean_file_names = TRUE, .id = NULL, ...)</a></code></p>
<ul>
<li>
<code>folder</code>: Path to a folder of FlexFiles (.zip) archive.</li>
<li>
<code>read_function</code>: The function to use to read each file. <code><a href="../reference/read_ff.html">read_ff()</a></code> will be used in most cases in this paper.</li>
<li>
<code>.clean_file_names = TRUE</code>: Logical to clean names into lower snake case or not.</li>
<li>
<code>id</code>: Optionally add an ID variable to each file table as this name. This allows an analyst to break out data discretely by FlexFile.</li>
</ul>
</div>
<div id="example-1" class="section level5">
<h5 class="hasAnchor">
<a href="#example-1" class="anchor"></a>Example</h5>
<p>Much like <code><a href="../reference/read_ff.html">read_ff()</a></code>, minimal code is required to read in a folder of FlexFile submissions. This example reads in a folder of two FlexFiles into R.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">folder</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata/multiple-flexfiles"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"readflexfile"</span>)

<span class="no">flexfiles</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/costmisc/man/read_folder.html">read_folder</a></span>(<span class="no">folder</span>,
                         <span class="kw">read_function</span> <span class="kw">=</span> <span class="kw pkg">readflexfile</span><span class="kw ns">::</span><span class="no"><a href="../reference/read_ff.html">read_ff</a></span>)

<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">flexfiles</span>)
<span class="co">#&gt; [1] "list"</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">flexfiles</span>)
<span class="co">#&gt; [1] 2</span></pre></body></html></div>
<p>The list <code>flexfile</code> contains two separate lists – one for each zipped FlexFile located within the folder. The <code><a href="https://rdrr.io/pkg/costmisc/man/read_folder.html">read_folder()</a></code> function applied the <code><a href="../reference/read_ff.html">read_ff()</a></code> function to every (.zip) in the folder location. Each of the lists contain identically structured data frames, with unique data respective to the individual FlexFiles.</p>
<p>With the data now in the R environment, organizing the dataset (“tidying”, in tidyverse speak) will help format the FlexFile into a more useable structure.</p>
</div>
</div>
</div>
<div id="Tidy" class="section level3">
<h3 class="hasAnchor">
<a href="#Tidy" class="anchor"></a>Tidy</h3>
<p>Data tidying entails structuring datasets to facilitate analysis. Wickham defines data tidying as: “A standard way to organize data values within a dataset. A standard makes initial data cleaning easier because you don’t need to start from scratch and reinvent the wheel every time.”<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a></p>
<p>James, Cherwonik, and Bryant (ICEAA 2019) discuss common “tidy” data principals in the context of Cost.<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a> They include:</p>
<ul>
<li>Logically structuring tables (i.e., deciding if dollars and hours should be in one column, or two)</li>
<li>Consistently naming variables</li>
<li>Organizing WBS elements to order correctly and properly roll up to parent elements</li>
</ul>
<p>Tidy data is designed around the third normal form of data base normalization. The FlexFile is designed as a collection of database tables. Both tidy data and the FlexFile were designed under the same normalization principals. Due to their similar design philosophies, some further tidying functions can be applied to the FlexFile to enhance its structure for analysis.</p>
<div id="stack_ff" class="section level4">
<h4 class="hasAnchor">
<a href="#stack_ff" class="anchor"></a><code>stack_ff()</code>
</h4>
<p>The <code><a href="https://rdrr.io/pkg/costmisc/man/read_folder.html">read_folder()</a></code> function creates a list of lists – one for each FlexFile. In order to create a singular data frame containing multiple FlexFiles, one must unpack these lists into one list of stacked data frames. The function <code><a href="../reference/stack_ff.html">stack_ff()</a></code> takes care of this.</p>
<div id="usage-and-arguments-2" class="section level5">
<h5 class="hasAnchor">
<a href="#usage-and-arguments-2" class="anchor"></a>Usage and Arguments</h5>
<p><code><a href="../reference/stack_ff.html">stack_ff(.data)</a></code></p>
<ul>
<li>
<code>.data</code>: A list of FlexFile submissions’ data frames converted from JSON format.</li>
</ul>
</div>
<div id="examples" class="section level5">
<h5 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h5>
<p>The output of this function is a singular list containing one data frame for each data table in the FlexFile. For example, the <code>actualcosthourdata</code> data frame stacks the records from each loaded FlexFile. The <code>doc_id</code> column, created in the <code><a href="https://rdrr.io/pkg/costmisc/man/add_id_col.html">listindex_to_col()</a></code> function, identifies which FlexFile a specific record is from.</p>
<p>Because the output of <code><a href="https://rdrr.io/pkg/costmisc/man/read_folder.html">read_folder()</a></code> and <code><a href="https://rdrr.io/pkg/costmisc/man/add_id_col.html">listindex_to_col()</a></code> is simply a list, we can pipe together these two functions and <code><a href="../reference/stack_ff.html">stack_ff()</a></code> in one efficient snippet of code:</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">ff_stack</span> <span class="kw">&lt;-</span> <span class="no">flexfiles</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/costmisc/man/add_id_col.html">listindex_to_col</a></span>() <span class="kw">%&gt;%</span>
  <span class="kw pkg">readflexfile</span><span class="kw ns">::</span><span class="fu"><a href="../reference/stack_ff.html">stack_ff</a></span>()

<span class="co"># ff_stack is a list of 15 data frames.</span>
<span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span>(<span class="no">ff_stack</span>)
<span class="co">#&gt; [1] "list"</span>
<span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span>(<span class="no">ff_stack</span>)
<span class="co">#&gt; [1] 19</span></pre></body></html></div>
<p>In this case, we did not need to define a list as an argument in the <code><a href="../reference/stack_ff.html">stack_ff()</a></code> function because it is piped directly in to it from the output of <code><a href="../reference/read_ff.html">read_ff()</a></code> and optional <code><a href="https://rdrr.io/pkg/costmisc/man/add_id_col.html">listindex_to_col()</a></code> functions.</p>
</div>
</div>
<div id="listindex_to_col" class="section level4">
<h4 class="hasAnchor">
<a href="#listindex_to_col" class="anchor"></a><code>listindex_to_col()</code>
</h4>
<p>The optional function <code><a href="https://rdrr.io/pkg/costmisc/man/add_id_col.html">listindex_to_col()</a></code> adds the list index from the first list of a list of data frames as an ID column in each of the nested data frames. This provides a unique ID for each FlexFile in a list of stacked data frames containing multiple FlexFiles. More descriptive unique identifiers, such as contractor or program name, are added through the <code><a href="../reference/flatten_lists.html">flatten_ff()</a></code> function, as described in the section 1.6.3: Transform.</p>
<div id="usage-and-arguments-3" class="section level5">
<h5 class="hasAnchor">
<a href="#usage-and-arguments-3" class="anchor"></a>Usage and Arguments</h5>
<p><code><a href="https://rdrr.io/pkg/costmisc/man/add_id_col.html">listindex_to_col(.nestedlist, var = "listid")</a></code></p>
<ul>
<li>
<code>.nestedlist</code>: A nested list of data frames</li>
<li>
<code>var = "listid"</code>: Character name of which to name the ID column. The default is <code>listid</code>.</li>
</ul>
</div>
<div id="examples-1" class="section level5">
<h5 class="hasAnchor">
<a href="#examples-1" class="anchor"></a>Examples</h5>
<p>Applying <code><a href="https://rdrr.io/pkg/costmisc/man/add_id_col.html">listindex_to_col()</a></code> to the list of FlexFiles (“flexfiles”) adds a column, <code>doc_id</code>, to each table with the list index of each FlexFile.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">flexfiles</span> <span class="kw">&lt;-</span> <span class="no">flexfiles</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/costmisc/man/add_id_col.html">listindex_to_col</a></span>(<span class="kw">var</span> <span class="kw">=</span> <span class="st">"doc_id"</span>)

<span class="co"># "doc_id" == 1 added to each table in the first indexed list.</span>
<span class="no">flexfiles</span><span class="kw">[[</span><span class="fl">1</span>]]$<span class="no">enditems</span>
<span class="co">#&gt; # A tibble: 2 x 3</span>
<span class="co">#&gt;   doc_id id    name     </span>
<span class="co">#&gt;    &lt;int&gt; &lt;chr&gt; &lt;chr&gt;    </span>
<span class="co">#&gt; 1      1 Var-A Variant A</span>
<span class="co">#&gt; 2      1 Var-B Variant B</span></pre></body></html></div>
</div>
</div>
</div>
<div id="transform" class="section level3">
<h3 class="hasAnchor">
<a href="#transform" class="anchor"></a>Transform</h3>
<p>Data transformation involves creating new variables from existing ones, reorganizing columns in a more logical manner, and joining together previously separate tables. The FlexFile requires a certain amount of data transformation due to its relational structure. Often a single flat table is easier to work with. The <code><a href="../reference/flatten_lists.html">flatten_ff()</a></code> function does this, joining names and IDs, and pulling in metadata (e.g., the program name or the contract number) to form one data frame for analysis.</p>
<div id="flatten_ff" class="section level4">
<h4 class="hasAnchor">
<a href="#flatten_ff" class="anchor"></a><code>flatten_ff()</code>
</h4>
<p>The function <code><a href="../reference/flatten_lists.html">flatten_ff()</a></code> transforms the imported FlexFile list object into one data frame.</p>
<p>Specifically, the FlexFile contains the <code>actualcosthourdata</code> table with dollars and hours tagged to various IDs. The names corresponding to these IDs are found within the various ID tables. For example, the <code>account_id</code> column in the <code>actualcosthourdata</code> table ties to the <code>id</code> column in the <code>accounts</code> table. Each ID represents a plain English name that should replace the <code>id</code> in the <code>actualcosthourdata</code> table.</p>
<p>To create this large data frame, <code>flatten()</code> does the following:</p>
<ul>
<li><p>Joins IDs from the <code>actualcosthourdata</code> and <code>forecastatcompletioncosthourdata</code> to names in its corresponding lookup tables.</p></li>
<li><p>Stacks the <code>actualcosthourdata</code> and the <code>forecastatcompletioncosthourdata</code> to create a table of all costs and hours. Creates a new column, <code>atd_or_fac</code>, to indicate if a specific record is incurred (“ATD”) or forecasted (“FAC”).</p></li>
<li><p>Normalizes the standard category field.</p></li>
</ul>
<p>Completing the above three tasks in Excel requires a substantial amount of time, including:</p>
<ol style="list-style-type: decimal">
<li><p>Writing “vlookups” to join each ID column with its respective name column.</p></li>
<li><p>Manually appending one table to another, while ensuring columns are ordered identically.</p></li>
<li><p>Developing a mapping table between the standard category fields, and normalizing them with “vlookups”.</p></li>
</ol>
<p>Doing this for every FlexFile is a significant resource strain. The <code><a href="../reference/flatten_lists.html">flatten_ff()</a></code> function, and <strong><code>csdrtools</code></strong> more generally, provides an instant, repeatable solution to these tasks. This saves time organizing data, and provides more for analysis.</p>
<div id="usage-and-arguments-4" class="section level5">
<h5 class="hasAnchor">
<a href="#usage-and-arguments-4" class="anchor"></a>Usage and Arguments</h5>
<p><code><a href="../reference/flatten_lists.html">flatten_ff(flexfile)</a></code></p>
<ul>
<li>
<code>flexfile</code>: A FlexFile created from the <code><a href="../reference/read_ff.html">read_ff()</a></code> function.</li>
</ul>
</div>
<div id="examples-2" class="section level5">
<h5 class="hasAnchor">
<a href="#examples-2" class="anchor"></a>Examples</h5>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">ff_flat</span> <span class="kw">&lt;-</span> <span class="no">flexfiles</span> <span class="kw">%&gt;%</span>
  <span class="kw pkg">readflexfile</span><span class="kw ns">::</span><span class="fu"><a href="../reference/stack_ff.html">stack_ff</a></span>() <span class="kw">%&gt;%</span>
  <span class="kw pkg">readflexfile</span><span class="kw ns">::</span><span class="fu"><a href="../reference/flatten_lists.html">flatten_ff</a></span>()</pre></body></html></div>
<p>Like the other functions, <code><a href="../reference/flatten_lists.html">flatten_ff()</a></code> is pipeable – it takes the output of <code><a href="../reference/stack_ff.html">stack_ff()</a></code> (a list of FlexFiles), and uses that as its only argument. The outputs of <code><a href="https://rdrr.io/pkg/costmisc/man/read_folder.html">read_folder()</a></code> and <code><a href="../reference/stack_ff.html">stack_ff()</a></code> were lists. The output of <code><a href="../reference/flatten_lists.html">flatten_ff()</a></code> is a data frame. Note how <code><a href="../reference/flatten_lists.html">flatten_ff()</a></code> also replaced all IDs with their corresponding names.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>

<span class="no">ff_flat_accounts</span> <span class="kw">&lt;-</span> <span class="no">ff_flat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">doc_id</span>, <span class="no">account_name</span>, <span class="no">value_dollars</span>, <span class="no">value_hours</span>)

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">ff_flat_accounts</span>)
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt;   doc_id account_name           value_dollars value_hours</span>
<span class="co">#&gt;    &lt;int&gt; &lt;chr&gt;                          &lt;dbl&gt;       &lt;int&gt;</span>
<span class="co">#&gt; 1      1 Account FKWF-QPRF-FTNL          9519         118</span>
<span class="co">#&gt; 2      1 Account FKWF-QPRF-FTNL         12730         188</span>
<span class="co">#&gt; 3      1 Account FKWF-QPRF-FTNL         12661         161</span>
<span class="co">#&gt; 4      1 Account FKWF-QPRF-FTNL          9517         116</span>
<span class="co">#&gt; 5      1 Account FKWF-QPRF-FTNL         10708         140</span>
<span class="co">#&gt; 6      1 Account FKWF-QPRF-FTNL          9845         135</span></pre></body></html></div>
<p>We now have a data frame to work with. The <code>tbl_*()</code> functions use this data frame to create a number of summary tables for streamlined analysis.</p>
</div>
</div>
<div id="tbl_-family-of-functions" class="section level4">
<h4 class="hasAnchor">
<a href="#tbl_-family-of-functions" class="anchor"></a><code>tbl_*() family of functions</code>
</h4>
<p>Many different summaries of the FlexFile can be produced – each with their own purpose. Examples include pivoting costs to create separate columns for recurring and nonrecurring, or actuals and forecasts. This may also entail filtering the data to include only specific dates, or only the CLINs or accounts that are the highest cost drivers. These quick yet effective transformations are the purpose of the <code>tbl_*()</code> group of functions.</p>
<p>The FlexFile is a departure from the familiar DD 1921 and 1921-1 report formats. The <code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_1921()</a></code> and <code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_1921_1()</a></code> functions recreate these reports directly from the flattened FlexFile data frame. In addition, <code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_direct_rates()</a></code> calculates direct labor rates for the standard categories found on the DD 1921-1 report.</p>
<p>Other functions leverage the added fields of the FlexFile.</p>
<ul>
<li>
<code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_top_n_clins()</a></code> and <code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_top_n_accounts()</a></code> identify the largest accounts and CLINs.</li>
<li>
<code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_wbs_by_date()</a></code> phases WBS level costs by the FlexFile’s reporting periods.</li>
<li>
<code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_wbs_by_account()</a></code> creates a report similar to the DD 1921 with insight down to the account level.</li>
</ul>
<div id="usage-and-arguments-5" class="section level5">
<h5 class="hasAnchor">
<a href="#usage-and-arguments-5" class="anchor"></a>Usage and Arguments</h5>
<ul>
<li><code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_1921(flattened_ff, value = c("Dollars", "Hours"))</a></code></li>
<li><code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_1921_1(flattened_ff, value = c("Dollars", "Hours"))</a></code></li>
<li><code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_direct_rates(flattened_ff)</a></code></li>
<li><code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_wbs_by_date(flattened_ff, timeframe = c("Year", "Month"))</a></code></li>
<li><code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_top_n_accounts(flattened_ff, n = 10)</a></code></li>
<li><code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_top_n_clins(flattened_ff, n = 10)</a></code></li>
</ul>
<p>Where,</p>
<ul>
<li>
<code>flattened_ff</code> is a flattened FlexFile created from the flatten_ff() function.</li>
<li>
<code>value</code> selects either “Dollars” or “Hours” to summarize in the data frame.</li>
<li>
<code>timeframe</code> selects either “Year” or “Month” to summarize the actual dollars by in the data frame.</li>
<li>
<code>n</code> is an integer for the top n values to select.</li>
</ul>
</div>
<div id="examples-3" class="section level5">
<h5 class="hasAnchor">
<a href="#examples-3" class="anchor"></a>Examples</h5>
<div id="tbl_1921-and-tbl_1921_1" class="section level6">
<h6>
<code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_1921()</a></code> and <code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_1921_1()</a></code>
</h6>
<p>Here, we’ve created the DD 1921 report, filtering to only the actuals incurred to date, and printing the first six WBS elements.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ezflexfile</span>)

<span class="no">DD_1921</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_1921</a></span>(<span class="no">ff_flat</span>, <span class="kw">value</span> <span class="kw">=</span> <span class="st">"Dollars"</span>)

<span class="no">DD_1921_actuals</span> <span class="kw">&lt;-</span> <span class="no">DD_1921</span> <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">wbs_element_id</span>, <span class="no">wbs_name</span>, <span class="no">ATD_NONRECURRING</span>, <span class="no">ATD_RECURRING</span>)

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">DD_1921_actuals</span>)
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt; # Groups:   wbs_element_id, wbs_name [6]</span>
<span class="co">#&gt;   wbs_element_id wbs_name        ATD_NONRECURRING ATD_RECURRING</span>
<span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;                      &lt;dbl&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 1.0            TOTAL                         NA            NA</span>
<span class="co">#&gt; 2 1.1            Subsystem 1.1                 NA            NA</span>
<span class="co">#&gt; 3 1.1.1          Subsystem 1.1.1         88169798      86562542</span>
<span class="co">#&gt; 4 1.1.2          Subsystem 1.1.2        201514720     204236354</span>
<span class="co">#&gt; 5 1.1.3          Subsystem 1.1.3        584810456     588042224</span>
<span class="co">#&gt; 6 1.1.4          Subsystem 1.1.4               NA            NA</span></pre></body></html></div>
<p>The <code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_1921()</a></code> and <code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_1921_1()</a></code> functions provide some flexibility while maintaining the core structure of the DD 1921 and 1921-1 reports. In this example, we’ve elected to print hours. Using functions from dplyr, such as <code><a href="https://dplyr.tidyverse.org/reference/select.html">select()</a></code>, we can further manipulate the table to only include the forecasts columns.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r">
<span class="no">DD_1921_1</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_1921_1</a></span>(<span class="no">ff_flat</span>, <span class="kw">value</span> <span class="kw">=</span> <span class="st">"Dollars"</span>)

<span class="no">DD_1921_1_actuals</span> <span class="kw">&lt;-</span> <span class="no">DD_1921_1</span> <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">standard_category_id</span>, <span class="no">FAC_NONRECURRING</span>, <span class="no">FAC_RECURRING</span>)

<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">DD_1921_1_actuals</span>)
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt; # Groups:   standard_category_id [6]</span>
<span class="co">#&gt;   standard_category_id             FAC_NONRECURRING FAC_RECURRING</span>
<span class="co">#&gt;   &lt;chr&gt;                                       &lt;dbl&gt;         &lt;dbl&gt;</span>
<span class="co">#&gt; 1 DIRECT_ENGINEERING_LABOR              72424094360   72685856544</span>
<span class="co">#&gt; 2 DIRECT_MAINTENANCE_OTHER_LABOR                  0             0</span>
<span class="co">#&gt; 3 DIRECT_MAINTENANCE_TOUCH_LABOR                  0             0</span>
<span class="co">#&gt; 4 DIRECT_MANUFACTURING_OTHER_LABOR      14594093674   14621662988</span>
<span class="co">#&gt; 5 DIRECT_MANUFACTURING_TOUCH_LABOR      14375471840   14452753742</span>
<span class="co">#&gt; 6 DIRECT_MATERIALS                      14484882484   14537109470</span></pre></body></html></div>
</div>
<div id="tbl_direct_rates-and-tbl_wbs_by_account" class="section level6">
<h6>
<code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_direct_rates()</a></code> and <code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_wbs_by_account()</a></code>
</h6>
<p>The relationship between standard category and functional category, as well as WBS element and account, are of interest when analyzing the FlexFile. These provide insight into how a contractor is mapping their internal pricing categories and work packages to the standard elements on the DD 1921 and 1921-1 reports. The <code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_direct_rates()</a></code> and <code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_wbs_by_account()</a></code> functions provide these mappings.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_direct_rates</a></span>(<span class="no">ff_flat</span>)) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">standard_category_id</span>, <span class="no">functional_category_name</span>, <span class="no">direct_rate</span>)
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt; # Groups:   standard_category_id [2]</span>
<span class="co">#&gt;   standard_category_id          functional_category_name             direct_rate</span>
<span class="co">#&gt;   &lt;chr&gt;                         &lt;chr&gt;                                      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 DIRECT_ENGINEERING_LABOR      Direct Engineering Labor (1)                74.9</span>
<span class="co">#&gt; 2 DIRECT_ENGINEERING_LABOR      Direct Engineering Labor (2)                75.1</span>
<span class="co">#&gt; 3 DIRECT_ENGINEERING_LABOR      Direct Engineering Labor (3)                75.1</span>
<span class="co">#&gt; 4 DIRECT_ENGINEERING_LABOR      Direct Engineering Labor (4)                74.9</span>
<span class="co">#&gt; 5 DIRECT_ENGINEERING_LABOR      Direct Engineering Labor (5)                75.1</span>
<span class="co">#&gt; 6 DIRECT_MANUFACTURING_TOUCH_L~ Direct Manufacturing Operations Lab~        75.3</span></pre></body></html></div>
<p>Both are called in largely the same manner.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_wbs_by_account</a></span>(<span class="no">ff_flat</span>)) <span class="kw">%&gt;%</span>
  <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="no">wbs_name</span>, <span class="no">account_name</span>, <span class="no">value_dollars</span>)
<span class="co">#&gt; Adding missing grouping variables: `wbs_element_id`</span>
<span class="co">#&gt; # A tibble: 6 x 4</span>
<span class="co">#&gt; # Groups:   wbs_element_id, wbs_name [2]</span>
<span class="co">#&gt;   wbs_element_id wbs_name        account_name           value_dollars</span>
<span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;           &lt;chr&gt;                          &lt;dbl&gt;</span>
<span class="co">#&gt; 1 1.1.1          Subsystem 1.1.1 Account FBQR-VVSQ-QLHV      50968602</span>
<span class="co">#&gt; 2 1.1.1          Subsystem 1.1.1 Account FKWF-QPRF-FTNL      20918240</span>
<span class="co">#&gt; 3 1.1.1          Subsystem 1.1.1 Account PRLB-DWKY-YXKD      42820944</span>
<span class="co">#&gt; 4 1.1.1          Subsystem 1.1.1 Account PYNS-DRBR-SJZZ      27222254</span>
<span class="co">#&gt; 5 1.1.1          Subsystem 1.1.1 Account YHQB-ZTBM-JJJW      32802300</span>
<span class="co">#&gt; 6 1.1.2          Subsystem 1.1.2 Account BVVK-JVDR-XLDJ     113575528</span></pre></body></html></div>
</div>
<div id="tbl_wbs_by_date" class="section level6">
<h6><code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_wbs_by_date()</a></code></h6>
<p>The FlexFile is time-phased. This is an advantage over the DD 1921 reports, which represented only a snapshot from a point in time. Function <code><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_wbs_by_date()</a></code> details WBS element expenditures over the report’s reporting periods. The resulting table can be viewed at either an annual or monthly level.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r">
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_wbs_by_date</a></span>(<span class="no">ff_flat</span>, <span class="kw">timeframe</span> <span class="kw">=</span> <span class="st">"Year"</span>))
<span class="co">#&gt; # A tibble: 6 x 5</span>
<span class="co">#&gt; # Groups:   wbs_element_id, wbs_name [6]</span>
<span class="co">#&gt;   wbs_element_id wbs_name              `2016`     `2017`     `2018`</span>
<span class="co">#&gt;   &lt;chr&gt;          &lt;chr&gt;                  &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;</span>
<span class="co">#&gt; 1 1.1.1          Subsystem 1.1.1     69452828   70336840   34942672</span>
<span class="co">#&gt; 2 1.1.2          Subsystem 1.1.2    162343872  162234444   81172758</span>
<span class="co">#&gt; 3 1.1.3          Subsystem 1.1.3    468738294  467484234  236630152</span>
<span class="co">#&gt; 4 1.1.4.1        Subsystem 1.1.4.1 3643693012 3654680346 1820086772</span>
<span class="co">#&gt; 5 1.1.4.2        Subsystem 1.1.4.2 5708007578 5729766792 2859932652</span>
<span class="co">#&gt; 6 1.1.4.3        Subsystem 1.1.4.3   71820950   71906616   35608888</span></pre></body></html></div>
</div>
<div id="tbl_top_n_accounts-and-tbl_top_n_clins" class="section level6">
<h6>
<code>tbl_top_n_accounts</code> and <code>tbl_top_n_clins</code>
</h6>
<p>These two functions identify accounts and CLINs that drive costs. One can specify the number of rows it filters, with 10 as the default. In this example, we leverage the <code>scales</code> package to apply formatting to the dollars, hours, and percentages.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">scales</span>)

<span class="no">top_five</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/ezflexfile/man/summarize_ff.html">tbl_top_n_accounts</a></span>(<span class="no">ff_flat</span>, <span class="kw">n</span> <span class="kw">=</span> <span class="fl">5</span>)

<span class="co">#Reformat values to dollars, integers, and percentages</span>
<span class="no">top_five</span> <span class="kw">&lt;-</span> <span class="no">top_five</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">value_dollars</span> <span class="kw">=</span> <span class="fu"><a href="https://scales.r-lib.org//reference/label_dollar.html">dollar</a></span>(<span class="no">value_dollars</span>),
         <span class="kw">value_hours</span> <span class="kw">=</span> <span class="fu"><a href="https://scales.r-lib.org//reference/label_number.html">comma</a></span>(<span class="no">value_hours</span>),
         <span class="kw">dollars_pct</span> <span class="kw">=</span> <span class="fu"><a href="https://scales.r-lib.org//reference/label_percent.html">percent</a></span>(<span class="no">dollars_pct</span>))

<span class="no">top_five</span>
<span class="co">#&gt; # A tibble: 5 x 4</span>
<span class="co">#&gt;   account_name           value_dollars  value_hours dollars_pct</span>
<span class="co">#&gt;   &lt;chr&gt;                  &lt;chr&gt;          &lt;chr&gt;       &lt;chr&gt;      </span>
<span class="co">#&gt; 1 Account SKHY-YQQC-PHGJ $3,935,275,884 &lt;NA&gt;        7.86%      </span>
<span class="co">#&gt; 2 Account YWVH-NYZG-NQHY $2,926,011,772 &lt;NA&gt;        5.84%      </span>
<span class="co">#&gt; 3 Account DLFK-BQFH-CHPD $2,730,289,162 &lt;NA&gt;        5.45%      </span>
<span class="co">#&gt; 4 Account RHZG-XBBJ-VYLL $2,397,022,944 &lt;NA&gt;        4.79%      </span>
<span class="co">#&gt; 5 Account HPVK-XRSY-FTXW $2,309,107,260 &lt;NA&gt;        4.61%</span></pre></body></html></div>
<p>The design philosophy of <strong><code>csdrtools</code></strong> enabled the functions to interact nicely with tidyverse packages. In this example, they also work with packages outside of the tidyverse. For example, we can present a stylized version of the data frame by throwing it into the <code>pander</code> package with minimal additional code. This reformats the data from a data frame (useful for data analysis) to a formatted table (useful for presentation and decision making). The table printed below is the same data as the data frame printed above, but easier on the eyes.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">kableExtra</span>)

<span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/reexports.html">kable</a></span>(<span class="no">top_five</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_styling.html">kable_styling</a></span>()</pre></body></html></div>
<table class="table table">
<thead><tr>
<th style="text-align:left;">
account_name
</th>
<th style="text-align:left;">
value_dollars
</th>
<th style="text-align:left;">
value_hours
</th>
<th style="text-align:left;">
dollars_pct
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Account SKHY-YQQC-PHGJ
</td>
<td style="text-align:left;">
$3,935,275,884
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
7.86%
</td>
</tr>
<tr>
<td style="text-align:left;">
Account YWVH-NYZG-NQHY
</td>
<td style="text-align:left;">
$2,926,011,772
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
5.84%
</td>
</tr>
<tr>
<td style="text-align:left;">
Account DLFK-BQFH-CHPD
</td>
<td style="text-align:left;">
$2,730,289,162
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
5.45%
</td>
</tr>
<tr>
<td style="text-align:left;">
Account RHZG-XBBJ-VYLL
</td>
<td style="text-align:left;">
$2,397,022,944
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
4.79%
</td>
</tr>
<tr>
<td style="text-align:left;">
Account HPVK-XRSY-FTXW
</td>
<td style="text-align:left;">
$2,309,107,260
</td>
<td style="text-align:left;">
NA
</td>
<td style="text-align:left;">
4.61%
</td>
</tr>
</tbody>
</table>
<p>These functions allow the user to efficiently reorganize the data set from a large flat file to useful summary tables. Sometimes, it is helpful to plot the data, as well. We can do this with the <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff()</a></code> functions.</p>
</div>
</div>
</div>
</div>
<div id="visualize" class="section level3">
<h3 class="hasAnchor">
<a href="#visualize" class="anchor"></a>Visualize</h3>
<p>Well-conceived visualizations serve many purposes in Cost. Hierarchical relationships, trend analysis, and comparative visuals help an analyst better understand the data set, and communicate the data set to decision makers. The <strong><code>csdrtools</code></strong> package contains two primary plotting functions. The <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff()</a></code> function returns two different area charts and one bar chart. The <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">sankey_ff()</a></code> function returns a Sankey diagram, useful for visualizing relationships. The following sections describe these two functions.</p>
<div id="plot_ff" class="section level4">
<h4 class="hasAnchor">
<a href="#plot_ff" class="anchor"></a><code>plot_ff()</code>
</h4>
<p>The <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff()</a></code> function delivers a set of visualizations of the FlexFile. The function returns different graphics based on the arguments described below.</p>
<div id="usage-and-arguments-6" class="section level5">
<h5 class="hasAnchor">
<a href="#usage-and-arguments-6" class="anchor"></a>Usage and Arguments</h5>
<p><code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff(file, type)</a></code></p>
<ul>
<li><p><code>file</code>: Data frame of a flattened FlexFile.</p></li>
<li>
<p><code>Type</code>: A numeric value representing the visual to print.</p>
<ul>
<li>
<code>Type = 1</code>: Stacked area chart of incurred costs over time, by recurring and nonrecurring.</li>
<li>
<code>Type = 2</code>: Stacked area chart of incurred costs over time, by WBS element ID.</li>
<li>
<code>Type = 3</code>: Bar chart of labor rates by functional category.</li>
</ul>
</li>
</ul>
</div>
<div id="example-2" class="section level5">
<h5 class="hasAnchor">
<a href="#example-2" class="anchor"></a>Example</h5>
</div>
<div id="plot_fftype-1" class="section level5">
<h5 class="hasAnchor">
<a href="#plot_fftype-1" class="anchor"></a><code>plot_ff(type = 1)</code>
</h5>
<p>Time-phased dollars and hours are an important aspect of the FlexFile. A natural way to view time phasing is through an area (or sand) chart, where the x-axis represents the date costs are incurred and the y-value depicts those costs. <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff(type = 1)</a></code> presents costs over time, colored by nonrecurring (NR) or recurring (R) effort. This helps readily distinguish the ratio of NR to R costs.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r">
<span class="no">ff_flat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff</a></span>(<span class="kw">type</span> <span class="kw">=</span> <span class="fl">1</span>)
<span class="co">#&gt; Warning: Removed 2 rows containing missing values (position_stack).</span></pre></body></html></div>
<p><img src="csdrtool-vignette_files/figure-html/unnamed-chunk-17-1.png" width="672"></p>
</div>
<div id="plot_fftype-2" class="section level5">
<h5 class="hasAnchor">
<a href="#plot_fftype-2" class="anchor"></a><code>plot_ff(type = 2)</code>
</h5>
<p>The <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff(type = 2)</a></code> function uses the same structure as <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff(type = 1)</a></code>, but instead breaks the colors out by WBS element ID. This demonstrates, for example, cost growth for certain elements at specific points throughout a contract lifecycle. In this example, we’ve filtered down to select aircraft hardware elements: the wing and the nacelle.</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r">
<span class="no">ff_flat_hardware</span> <span class="kw">&lt;-</span> <span class="no">ff_flat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw pkg">stringr</span><span class="kw ns">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(<span class="no">wbs_name</span>, <span class="st">'Subsystem 1.1.5.3'</span>) <span class="kw">|</span>
           <span class="kw pkg">stringr</span><span class="kw ns">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(<span class="no">wbs_name</span>, <span class="st">'Subsystem 1.1.4.5'</span>) )

<span class="no">ff_flat_hardware</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff</a></span>(<span class="kw">type</span> <span class="kw">=</span> <span class="fl">2</span>)</pre></body></html></div>
<p><img src="csdrtool-vignette_files/figure-html/unnamed-chunk-18-1.png" width="672"></p>
</div>
<div id="plot_fftype-3" class="section level5">
<h5 class="hasAnchor">
<a href="#plot_fftype-3" class="anchor"></a><code>plot_ff(type = 3)</code>
</h5>
<p>The functional category field in the FlexFile lends insight into contractor’s internal direct and overhead pricing categories. The <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff(type = 3)</a></code> function offers a bar chart of these direct pricing rates, ordered from highest to lowest and colored by the standard categories that they map to.</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r">
<span class="no">ff_flat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">plot_ff</a></span>(<span class="kw">type</span> <span class="kw">=</span> <span class="fl">3</span>)</pre></body></html></div>
<p><img src="csdrtool-vignette_files/figure-html/unnamed-chunk-19-1.png" width="672"></p>
</div>
</div>
<div id="sankey_ff" class="section level4">
<h4 class="hasAnchor">
<a href="#sankey_ff" class="anchor"></a><code>sankey_ff</code>
</h4>
<p>Sankey diagrams display flows from one variable (node) to another. The FlexFile includes dollars and hours tagged to both contractor-native tags (e.g., pricing categories, CLINs, accounts), as well as government-defined categories (e.g., standard category, WBS element). Insight into the mapping between industry and government categories is a unique benefit of the FlexFile. A Sankey diagram can effectively illustrate these relationships.</p>
<div id="usage-and-arguments-7" class="section level5">
<h5 class="hasAnchor">
<a href="#usage-and-arguments-7" class="anchor"></a>Usage and Arguments</h5>
<p><code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">sankey_ff(file, type)</a></code></p>
<ul>
<li><p><code>file</code>: Data frame of a flattened FlexFile.</p></li>
<li>
<p><code>Type</code>: A numeric value representing the different pre-canned visuals.</p>
<ul>
<li>
<code>Type = 1</code>: Visualizes the flow of cost from contractor category to functional category.</li>
<li>
<code>Type = 2</code>: Visualizes the flow of cost from account to WBS element.</li>
</ul>
</li>
</ul>
</div>
<div id="example-3" class="section level5">
<h5 class="hasAnchor">
<a href="#example-3" class="anchor"></a>Example</h5>
</div>
<div id="sankey_fftype-1" class="section level5">
<h5 class="hasAnchor">
<a href="#sankey_fftype-1" class="anchor"></a><code>sankey_ff(type = 1)</code>
</h5>
<p>The <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">sankey_ff(type = 1)</a></code> function illustrates the flow of costs from the standard functional categories (the government-defined categories in the DD 1921-1 and 1921-5 reports) to the contractor’s functional categories (intended to align with internal pricing categories). This example demonstrates this relationship for the direct and overhead engineering labor categories.</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r">
<span class="no">ff_flat_engineering</span> <span class="kw">&lt;-</span> <span class="no">ff_flat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw pkg">stringr</span><span class="kw ns">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(<span class="no">standard_category_id</span>, <span class="st">'ENGINEERING'</span>))

<span class="no">ff_flat_engineering</span> <span class="kw">%&gt;%</span>
   <span class="fu"><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">sankey_ff</a></span>(<span class="kw">type</span> <span class="kw">=</span> <span class="fl">1</span>)
<span class="co">#&gt; Warning: 'layout' objects don't have these attributes: 'fonot'</span>
<span class="co">#&gt; Valid attributes include:</span>
<span class="co">#&gt; 'font', 'title', 'uniformtext', 'autosize', 'width', 'height', 'margin', 'paper_bgcolor', 'plot_bgcolor', 'separators', 'hidesources', 'showlegend', 'colorway', 'datarevision', 'uirevision', 'editrevision', 'selectionrevision', 'template', 'modebar', 'meta', 'transition', '_deprecated', 'clickmode', 'dragmode', 'hovermode', 'hoverdistance', 'spikedistance', 'hoverlabel', 'selectdirection', 'grid', 'calendar', 'xaxis', 'yaxis', 'ternary', 'scene', 'geo', 'mapbox', 'polar', 'radialaxis', 'angularaxis', 'direction', 'orientation', 'editType', 'legend', 'annotations', 'shapes', 'images', 'updatemenus', 'sliders', 'colorscale', 'coloraxis', 'metasrc', 'barmode', 'bargap', 'mapType'</span></pre></body></html></div>
<div id="htmlwidget-f178ed590e7a62fd700f" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-f178ed590e7a62fd700f">{"x":{"visdat":{"8e4c2a9a27d8":["function () ","plotlyVisDat"]},"cur_data":"8e4c2a9a27d8","attrs":{"8e4c2a9a27d8":{"orientation":"h","node":{"label":["1.0","1.1","1.1.4","1.1.5","1.3","DIRECT_ENGINEERING_LABOR","ENGINEERING_LABOR_OVERHEAD","0","1","2","3","4","5","6"],"color":["blue","blue","blue","blue","blue","#468699","#4363d8"],"thickness":20,"line":{"color":"black","width":0.05}},"link":{"source":[0,1,2,3,4,0,1,2,3,4],"target":[5,5,5,5,5,6,6,6,6,6],"value":[26159740176,20610343281,9005448978,661486017,3647733890,2615980578,2061008771,900545634,66099243,364649850]},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sankey"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Sankey Diagram: WBS Element to Standard Category","fonot":{"size":12},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"orientation":"h","node":{"label":["1.0","1.1","1.1.4","1.1.5","1.3","DIRECT_ENGINEERING_LABOR","ENGINEERING_LABOR_OVERHEAD","0","1","2","3","4","5","6"],"color":["blue","blue","blue","blue","blue","#468699","#4363d8"],"thickness":20,"line":{"color":"black","width":0.05}},"link":{"source":[0,1,2,3,4,0,1,2,3,4],"target":[5,5,5,5,5,6,6,6,6,6],"value":[26159740176,20610343281,9005448978,661486017,3647733890,2615980578,2061008771,900545634,66099243,364649850]},"type":"sankey","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="sankey_fftype-2" class="section level5">
<h5 class="hasAnchor">
<a href="#sankey_fftype-2" class="anchor"></a><code>sankey_ff(type = 2)</code>
</h5>
<p>The <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">sankey_ff(type = 2)</a></code> function outputs the same plot as <code><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">sankey_ff(type = 1)</a></code>, but for the account to WBS element relationship. Filtering to one WBS element, in this case WBS #1.1.2 (Engine/Propulsion), the accounts that map to this element are visualized from highest to lowest cost, denoted by the size of the node. When outputted in R, this visual leverages an interactive “tool-tip” that displays costs and relationship details as one hovers over the diagram.</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r">
<span class="no">ff_flat_engine</span> <span class="kw">&lt;-</span> <span class="no">ff_flat</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="kw pkg">stringr</span><span class="kw ns">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(<span class="no">wbs_name</span>, <span class="st">'Subsystem 1.1.5.3'</span>))

<span class="no">ff_flat_engine</span> <span class="kw">%&gt;%</span>
   <span class="fu"><a href="https://rdrr.io/pkg/ezflexfile/man/plot_ff.html">sankey_ff</a></span>(<span class="kw">type</span> <span class="kw">=</span> <span class="fl">2</span>)
<span class="co">#&gt; Warning: 'layout' objects don't have these attributes: 'fonot'</span>
<span class="co">#&gt; Valid attributes include:</span>
<span class="co">#&gt; 'font', 'title', 'uniformtext', 'autosize', 'width', 'height', 'margin', 'paper_bgcolor', 'plot_bgcolor', 'separators', 'hidesources', 'showlegend', 'colorway', 'datarevision', 'uirevision', 'editrevision', 'selectionrevision', 'template', 'modebar', 'meta', 'transition', '_deprecated', 'clickmode', 'dragmode', 'hovermode', 'hoverdistance', 'spikedistance', 'hoverlabel', 'selectdirection', 'grid', 'calendar', 'xaxis', 'yaxis', 'ternary', 'scene', 'geo', 'mapbox', 'polar', 'radialaxis', 'angularaxis', 'direction', 'orientation', 'editType', 'legend', 'annotations', 'shapes', 'images', 'updatemenus', 'sliders', 'colorscale', 'coloraxis', 'metasrc', 'barmode', 'bargap', 'mapType'</span></pre></body></html></div>
<div id="htmlwidget-ec092447868a39d65a95" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ec092447868a39d65a95">{"x":{"visdat":{"8e4c6fa66f66":["function () ","plotlyVisDat"]},"cur_data":"8e4c6fa66f66","attrs":{"8e4c6fa66f66":{"orientation":"h","node":{"label":["DIRECT_ENGINEERING_LABOR","DIRECT_MANUFACTURING_OTHER_LABOR","DIRECT_MANUFACTURING_TOUCH_LABOR","DIRECT_MATERIALS","ENGINEERING_LABOR_OVERHEAD","FACILITIES_CAPITAL_COST_OF_MONEY","GENERAL_AND_ADMINISTRATIVE","MANUFACTURING_OPERATIONS_LABOR_OVERHEAD","MATERIAL_OVERHEAD","OTHER_DIRECT_COSTS","OTHER_OVERHEAD","Direct Engineering Labor (1)","Direct Engineering Labor (2)","Direct Engineering Labor (3)","Direct Engineering Labor (4)","Direct Engineering Labor (5)","Direct Manufacturing Operations Labor (1)","Direct Manufacturing Operations Labor (2)","Direct Material","Engineering Labor Overhead","Facilities Capital Cost of Money","General & Administrative","Manufacturing Operations Labor Overhead","Material Overhead","Other Direct Costs","Other Overhead","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25"],"color":["#468699","#bfef45","#3cb44b","#000075","#4363d8","#a9a9a9","#aaffc3","#fabebe","#f58231","#808000","#9A6324","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue"],"pad":15,"thickness":20,"line":{"color":"black","width":0.05}},"link":{"source":[11,12,13,14,15,16,17,16,17,18,19,20,21,22,23,24,25],"target":[0,0,0,0,0,1,1,2,2,3,4,5,6,7,8,9,10],"value":[11862326,11842654,11850025,11881915,11857207,6035729,5746423,5836316,6121708,11842552,5921294,1185714,11843468,2372940,1187939,1185517,118645]},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"sankey"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Sankey Diagram: Functional to Standard Category","fonot":{"size":12},"hovermode":"closest","showlegend":false},"source":"A","config":{"showSendToCloud":false},"data":[{"orientation":"h","node":{"label":["DIRECT_ENGINEERING_LABOR","DIRECT_MANUFACTURING_OTHER_LABOR","DIRECT_MANUFACTURING_TOUCH_LABOR","DIRECT_MATERIALS","ENGINEERING_LABOR_OVERHEAD","FACILITIES_CAPITAL_COST_OF_MONEY","GENERAL_AND_ADMINISTRATIVE","MANUFACTURING_OPERATIONS_LABOR_OVERHEAD","MATERIAL_OVERHEAD","OTHER_DIRECT_COSTS","OTHER_OVERHEAD","Direct Engineering Labor (1)","Direct Engineering Labor (2)","Direct Engineering Labor (3)","Direct Engineering Labor (4)","Direct Engineering Labor (5)","Direct Manufacturing Operations Labor (1)","Direct Manufacturing Operations Labor (2)","Direct Material","Engineering Labor Overhead","Facilities Capital Cost of Money","General & Administrative","Manufacturing Operations Labor Overhead","Material Overhead","Other Direct Costs","Other Overhead","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25"],"color":["#468699","#bfef45","#3cb44b","#000075","#4363d8","#a9a9a9","#aaffc3","#fabebe","#f58231","#808000","#9A6324","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue","blue"],"pad":15,"thickness":20,"line":{"color":"black","width":0.05}},"link":{"source":[11,12,13,14,15,16,17,16,17,18,19,20,21,22,23,24,25],"target":[0,0,0,0,0,1,1,2,2,3,4,5,6,7,8,9,10],"value":[11862326,11842654,11850025,11881915,11857207,6035729,5746423,5836316,6121708,11842552,5921294,1185714,11843468,2372940,1187939,1185517,118645]},"type":"sankey","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>The <strong><code>csdrtools</code></strong> package provides a set of functions that serve as building blocks for powerful analysis of the FlexFile in R. Each step in the process outlined above – import, tidy, transform – is necessary before any analysis or visualization is possible.</p>
<p>R provides the necessary environment for <strong><code>csdrtools</code></strong>. By developing the functions outlined in this paper, we have created an instantly scalable and repeatable process, capable of processing one FlexFile, or 100. This is simply not possible with Excel. Therefore, as the cost community transitions into the big data age, it is necessary that capabilities such as <strong><code>csdrtools</code></strong> exist and are adopted.</p>
<p>More generally, R will continue to provide a framework to the cost community that is:</p>
<ul>
<li>
<strong>Consistent</strong>. Scripts and functions are linear and largely read from top to bottom. Even poorly documented scripts can be followed.</li>
<li>
<strong>Object oriented</strong>. Data frames, functions, and many data types can be stored as objects. This creates an environment which minimizes rework, and reusing scripts is straightforward.</li>
<li>
<strong>Scalable</strong>. R handles all sorts of data sets, from simple .csv files to a relational structure such as the FlexFile JSON model.</li>
<li>
<strong>Fully customizable</strong>. Visualization packages such as ggplot2 and plotly support grammars of graphic to create beautiful plots.</li>
<li>
<strong>Dynamic</strong>. R objects can hold vector inputs, unlike Excel in which one value is limited to each cell.</li>
</ul>
<p>The FlexFile in its current state is difficult to use within Excel. The growing user base of tools such as R within the cost community is a critical enabler to using larger data sources. As the use of the FlexFile grows, so too will the need for a solution to provide faster, more accurate, and more insightful analysis. <strong><code>csdrtools</code></strong> provides this solution.</p>
<p>The FlexFile is still largely in its infancy, with only a portion of programs submitting their first FlexFiles to CADE. We envision the <strong><code>csdrtools</code></strong> package evolving with the FlexFile. This not only emphasizes the flexibility of <strong><code>csdrtools</code></strong>, but also the scalability of cost analysis in R.</p>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>“Implementation of Cost and Hour Report (FlexFile) and Quantity Data Reports Within the Cost and Software Data Reporting (CSDR) System”, OSD CAPE<a href="#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p><a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a><a href="#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p><a href="https://rstudio.com/" class="uri">https://rstudio.com/</a><a href="#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p><a href="https://www.tidyverse.org/" class="uri">https://www.tidyverse.org/</a><a href="#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p><a href="http://hadley.nz/" class="uri">http://hadley.nz/</a><a href="#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>Wickham, H., et al. 2019. “Welcome to the Tidyverse.” The Comprehensive R Archive Network. <a href="https://cran.r-project.org/web/packages/tidyverse/vignettes/paper.html" class="uri">https://cran.r-project.org/web/packages/tidyverse/vignettes/paper.html</a><a href="#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>Hadley Wickham and Garrett Grolemund. 2017. R for Data Science: Import, Tidy, Transform, Visualize, and Model Data (1st. ed.). O’Reilly Media, Inc.<a href="#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p> Help files in R can be accessed with the ? followed by the function name. For example, <code><a href="../reference/read_ff.html">?read_ff</a></code> will load the help file for <code><a href="../reference/read_ff.html">read_ff()</a></code>.<a href="#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p>For more information, refer to the FlexFile Data Exchange Instructions here: <a href="https://cade.osd.mil/policy/flexfile-quantity" class="uri">https://cade.osd.mil/policy/flexfile-quantity</a><a href="#fnref9" class="footnote-back">↩</a></p></li>
<li id="fn10"><p>Wickham, Hadley. “Tidy Data.” Journal of Statistical Software, vol. 10, no. 2, 2014<a href="#fnref10" class="footnote-back">↩</a></p></li>
<li id="fn11"><p>“Don’t Just Use Your Data… Exploit It”, Adam James, Jeff Cherwonik, Brandon Bryant, ICEAA 2019<a href="#fnref11" class="footnote-back">↩</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Adam H. James, Adam H. James, Ben Berkman.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
